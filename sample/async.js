(()=>{"use strict";var d=(o,t,e)=>new Promise((n,r)=>{var i=c=>{try{s(e.next(c))}catch(l){r(l)}},h=c=>{try{s(e.throw(c))}catch(l){r(l)}},s=c=>c.done?n(c.value):Promise.resolve(c.value).then(i,h);s((e=e.apply(o,t)).next())});function a(o){if(o.type==="opaqueredirect"&&o.url!==""&&(location.href=o.url),!o.headers.has("refresh"))return;const t=o.headers.get("refresh");if(t===null)return;const e=/url=(.+)$/;if(e.test(t)){const n=t.match(e);if(n===null)return;location.href=n[1]}}function w(o,t,e){const n=document.createEvent("CustomEvent");n.initCustomEvent(t,!1,!1,e);const r=document.getElementById(o);if(r===null)throw new Error("mandatory element not found");r.dispatchEvent(n)}function E(o){return fetch(o).then(t=>(a(t),new Promise((e,n)=>{t.ok?e(t.json()):n(t.statusText)}))).then(t=>new Promise((e,n)=>{t.status==="ok"?e(t):n(t)}))}function u(o){return d(this,null,function*(){const t=yield fetch(o);if(a(t),!t.ok)throw t;const e=yield t.json();if(e.status!=="ok")throw e;return e})}function b(o,t,e){return d(this,null,function*(){try{const n=new FormData(o),r=new Request(t,{body:n,credentials:"include",method:"POST",redirect:"manual"});v(e);const i=yield u(r);return y(e),i}catch(n){throw y(e),n}})}function q(o){return d(this,null,function*(){const t={credentials:"include",method:o.method||"GET",redirect:"manual"};"body"in o&&(t.body=o.body);const e=new Request(o.url,t),n=yield fetch(e);if(a(n),!n.ok)throw n;const r=yield n.json();if(r.status!=="ok")throw r;return r})}function v(o){m(),document.querySelectorAll("."+o).forEach(e=>{e.disabled=!0})}function y(o){m(),document.querySelectorAll("."+o).forEach(e=>{e.disabled=!1})}function m(){"NodeList"in window&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(o,t){t=t||window;for(let e=0;e<this.length;e++)o.call(t,this[e],e,this)})}var f=(o,t,e)=>new Promise((n,r)=>{var i=c=>{try{s(e.next(c))}catch(l){r(l)}},h=c=>{try{s(e.throw(c))}catch(l){r(l)}},s=c=>c.done?n(c.value):Promise.resolve(c.value).then(i,h);s((e=e.apply(o,t)).next())});document.addEventListener("DOMContentLoaded",()=>{const o=document.getElementById("suc_btn");o!==null&&o.addEventListener("click",()=>f(void 0,null,function*(){try{const n=new Request("./success.json"),r=yield u(n);console.log("success!"),console.dir(r)}catch(n){console.log("error"),console.dir(n)}}),!1);const t=document.getElementById("fail_btn_404");t!==null&&t.addEventListener("click",()=>f(void 0,null,function*(){try{const n=new Request("./404.json"),r=yield u(n);console.log("success!"),console.dir(r)}catch(n){console.log("error"),console.dir(n)}}),!1);const e=document.getElementById("fail_btn_bad");e!==null&&e.addEventListener("click",()=>f(void 0,null,function*(){try{const n=new Request("./bad.json"),r=yield u(n);console.log("success!"),console.dir(r)}catch(n){console.log("error"),console.dir(n)}}),!1)},!1)})();
