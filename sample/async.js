(()=>{"use strict";var d={};function c(o){if(o.type==="opaqueredirect"&&o.url!==""&&(location.href=o.url),!o.headers.has("refresh"))return;const e=o.headers.get("refresh");if(e===null)return;const t=/url=(.+)$/;if(t.test(e)){const n=e.match(t);if(n===null)return;location.href=n[1]}}function f(o,e,t){const n=document.createEvent("CustomEvent");n.initCustomEvent(e,!1,!1,t);const s=document.getElementById(o);if(s===null)throw new Error("mandatory element not found");s.dispatchEvent(n)}function h(o){return fetch(o).then(e=>(c(e),new Promise((t,n)=>{e.ok?t(e.json()):n(e.statusText)}))).then(e=>new Promise((t,n)=>{e.status==="ok"?t(e):n(e)}))}async function r(o){const e=await fetch(o);if(c(e),!e.ok)throw e;const t=await e.json();if(t.status!=="ok")throw t;return t}async function y(o,e,t){try{const n=new FormData(o),s=new Request(e,{body:n,credentials:"include",method:"POST",redirect:"manual"});i(t);const u=await r(s);return l(t),u}catch(n){throw l(t),n}}async function m(o){const e={credentials:"include",method:o.method||"GET",redirect:"manual"};"body"in o&&(e.body=o.body);const t=new Request(o.url,e),n=await fetch(t);if(c(n),!n.ok)throw n;const s=await n.json();if(s.status!=="ok")throw s;return s}function i(o){a(),document.querySelectorAll("."+o).forEach(t=>{t.disabled=!0})}function l(o){a(),document.querySelectorAll("."+o).forEach(t=>{t.disabled=!1})}function a(){"NodeList"in window&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(o,e){e=e||window;for(let t=0;t<this.length;t++)o.call(e,this[t],t,this)})}document.addEventListener("DOMContentLoaded",()=>{const o=document.getElementById("suc_btn");o!==null&&o.addEventListener("click",async()=>{try{const n=new Request("./success.json"),s=await r(n);console.log("success!"),console.dir(s)}catch(n){console.log("error"),console.dir(n)}},!1);const e=document.getElementById("fail_btn_404");e!==null&&e.addEventListener("click",async()=>{try{const n=new Request("./404.json"),s=await r(n);console.log("success!"),console.dir(s)}catch(n){console.log("error"),console.dir(n)}},!1);const t=document.getElementById("fail_btn_bad");t!==null&&t.addEventListener("click",async()=>{try{const n=new Request("./bad.json"),s=await r(n);console.log("success!"),console.dir(s)}catch(n){console.log("error"),console.dir(n)}},!1)},!1)})();
